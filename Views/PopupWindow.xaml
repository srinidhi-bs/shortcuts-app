<?xml version="1.0" encoding="UTF-8" ?>
<Window
    x:Class="ShortcutsApp.Views.PopupWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Width="600"
    Height="400"
    WindowStartupLocation="Manual">

    <!-- Window Properties for Popup Behavior -->
    <!-- 
        - Always on top: Topmost property
        - Borderless: WindowStyle="None"
        - No taskbar appearance: ShowInTaskbar="False"
        - Resizing disabled: ResizeMode="NoResize"
    -->
    
    <Grid>
        <!-- Background with Blur Effect and Opacity -->
        <Border x:Name="PopupBackground"
                Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                CornerRadius="12"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                Opacity="0.95">
            
            <!-- Drop Shadow Effect -->
            <Border.Shadow>
                <ThemeShadow />
            </Border.Shadow>
        </Border>
        
        <!-- Main Content -->
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            
            <!-- Header with Search -->
            <StackPanel Grid.Row="0" Spacing="16" Margin="0,0,0,24">
                <TextBlock Text="Shortcuts Launcher" 
                          FontSize="24" 
                          FontWeight="SemiBold"
                          HorizontalAlignment="Center" />
                
                <!-- Search Box (for future search functionality) -->
                <TextBox x:Name="SearchTextBox"
                         PlaceholderText="Start typing to search shortcuts..."
                         HorizontalAlignment="Stretch"
                         Visibility="Collapsed" />
            </StackPanel>
            
            <!-- Shortcuts Grid -->
            <ScrollViewer Grid.Row="1" 
                         HorizontalScrollMode="Disabled"
                         VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Disabled">
                
                <!-- Grid for displaying shortcut icons -->
                <GridView x:Name="ShortcutsGridView"
                         SelectionMode="Single"
                         IsItemClickEnabled="True"
                         ItemClick="ShortcutItem_Click"
                         SelectionChanged="ShortcutsGrid_SelectionChanged"
                         KeyDown="ShortcutsGrid_KeyDown"
                         HorizontalAlignment="Center">
                    
                    <!-- Grid Layout Configuration -->
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <!-- MaxColumns will be set programmatically based on settings -->
                            <UniformGrid x:Name="ShortcutsUniformGrid" 
                                        Columns="6" 
                                        Rows="0" />
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                    
                    <!-- Item Template for Shortcut Icons -->
                    <GridView.ItemTemplate>
                        <DataTemplate>
                            <Border x:Name="ShortcutItemBorder"
                                   Background="Transparent"
                                   CornerRadius="8"
                                   Padding="12"
                                   MinWidth="80"
                                   MinHeight="80">
                                
                                <!-- Hover effect -->
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="Transparent" />
                                        <Style.Triggers>
                                            <!-- Note: WinUI 3 uses VisualStates instead of triggers -->
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                
                                <StackPanel Spacing="8" HorizontalAlignment="Center">
                                    <!-- Application Icon -->
                                    <Image x:Name="ShortcutIcon"
                                           Source="{Binding IconPath}"
                                           Width="48"
                                           Height="48"
                                           Stretch="Uniform"
                                           HorizontalAlignment="Center" />
                                    
                                    <!-- Application Name -->
                                    <TextBlock Text="{Binding Name}"
                                              FontSize="12"
                                              TextAlignment="Center"
                                              TextWrapping="Wrap"
                                              MaxLines="2"
                                              TextTrimming="CharacterEllipsis"
                                              HorizontalAlignment="Center" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </GridView.ItemTemplate>
                    
                    <!-- Container Style for Selection Effects -->
                    <GridView.ItemContainerStyle>
                        <Style TargetType="GridViewItem">
                            <Setter Property="Margin" Value="4" />
                            <Setter Property="Padding" Value="0" />
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            <Setter Property="VerticalContentAlignment" Value="Stretch" />
                        </Style>
                    </GridView.ItemContainerStyle>
                </GridView>
            </ScrollViewer>
        </Grid>
        
        <!-- Instructions Footer (optional) -->
        <StackPanel VerticalAlignment="Bottom" 
                   HorizontalAlignment="Center" 
                   Margin="0,0,0,12"
                   Orientation="Horizontal"
                   Spacing="16">
            <TextBlock Text="↑↓←→ Navigate" 
                      FontSize="11" 
                      Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
            <TextBlock Text="Enter to Launch" 
                      FontSize="11" 
                      Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
            <TextBlock Text="Esc to Close" 
                      FontSize="11" 
                      Foreground="{ThemeResource TextFillColorTertiaryBrush}" />
        </StackPanel>
    </Grid>
</Window>